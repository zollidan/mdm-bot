# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Telegram Mini App

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª Telegram Mini App —Å Vue.js –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (MVP –≤–µ—Ä—Å–∏—è).

## –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### Backend (Python/FastAPI)

- **api_server.py** - FastAPI —Å–µ—Ä–≤–µ—Ä —Å REST API –¥–ª—è Mini App
  - `GET /api/products` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - `GET /api/products/{id}` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ
  - `GET /api/health` - health check endpoint

### Frontend (Vue.js)

**webapp/** - –∫–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ Mini App
- **package.json** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js
- **vite.config.js** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
- **index.html** - HTML —à–∞–±–ª–æ–Ω
- **Dockerfile** - –æ–±—Ä–∞–∑ –¥–ª—è production (Nginx)
- **nginx.conf** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
- **README.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è webapp
- **.env.example** - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**webapp/src/** - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
- **main.js** - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **App.vue** - –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- **style.css** - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å Telegram —Ç–µ–º–æ–π
- **components/ProductList.vue** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- **api/products.js** - API –∫–ª–∏–µ–Ω—Ç (axios)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **MINIAPP_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Mini App
- **MINIAPP_QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **CHANGES.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### config.py
```python
# –î–æ–±–∞–≤–ª–µ–Ω–æ:
WEBAPP_URL: str = "http://localhost:8000"
```

### kbs.py
```python
# –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:
from aiogram.types import WebAppInfo
from config import settings

# –í —Ñ—É–Ω–∫—Ü–∏–∏ main_kb() –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ Web App:
kb.button(text="üõçÔ∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥", web_app=WebAppInfo(url=webapp_url))
```

### pyproject.toml
```toml
# –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
"fastapi>=0.115.0",
"uvicorn>=0.32.0",
```

### docker-compose.yaml
```yaml
# –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã:
services:
  api:        # FastAPI REST API —Å–µ—Ä–≤–µ—Ä
  webapp:     # Nginx —Å Vue.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
```

### .env.example
```env
# –î–æ–±–∞–≤–ª–µ–Ω–æ:
WEBAPP_URL=http://localhost
```

### .gitignore
```
# –î–æ–±–∞–≤–ª–µ–Ω–æ:
webapp/node_modules/
webapp/dist/
webapp/.env
webapp/.env.local
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Bot (aiogram)
    ‚Üì [Web App Button]
Vue.js Frontend (webapp/)
    ‚Üì [HTTP API]
FastAPI Backend (api_server.py)
    ‚Üì [SQLAlchemy]
PostgreSQL Database
```

## MVP –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **Backend API:**
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î

2. **Frontend:**
   - Vue.js 3 —Å Composition API
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (–º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Web App SDK
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è (20 —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã Telegram
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º:**
   - –ö–Ω–æ–ø–∫–∞ "üõçÔ∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –±–æ—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–æ–≤–∞—Ä
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Mini App

4. **DevOps:**
   - Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - Nginx –¥–ª—è serving —Å—Ç–∞—Ç–∏–∫–∏ –≤ production
   - Proxy –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è API
   - Health checks

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### Development

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
python api_server.py  # API –Ω–∞ –ø–æ—Ä—Ç—É 8000
python main.py        # Telegram –±–æ—Ç
cd webapp && npm run dev  # Frontend –Ω–∞ –ø–æ—Ä—Ç—É 5173

# Docker
docker-compose up --build
```

### Production

```bash
# –û–±–Ω–æ–≤–∏—Ç—å .env —Å production URL
WEBAPP_URL=https://your-domain.com

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose
docker-compose up -d
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (Post-MVP)

- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ –≤ Mini App
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏–∑ Mini App
- [ ] –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –≤ Mini App
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ Mini App
- [ ] Offline —Ä–µ–∂–∏–º (PWA)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP, lazy loading)
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. API Health Check
```bash
curl http://localhost:8000/api/health
# –û—Ç–≤–µ—Ç: {"status":"ok","service":"mdm-bot-api"}
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
```bash
curl http://localhost:8000/api/products?page=1&limit=5
```

### 3. Docker Compose —Å—Ç–∞—Ç—É—Å
```bash
docker-compose ps
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã: bot, api, webapp, postgres, meilisearch
```

### 4. Telegram –±–æ—Ç
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
2. –ù–∞–∂–∞—Ç—å "üõçÔ∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python (–Ω–æ–≤—ã–µ)
- fastapi >= 0.115.0
- uvicorn >= 0.32.0

### Node.js
- vue ^3.5.0
- vite ^6.0.0
- @vitejs/plugin-vue ^5.2.0
- axios ^1.7.0
- @telegram-apps/sdk ^2.0.0

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP

1. –¢–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (–Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É –∏–∑ Mini App)
2. –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞
3. –ù–µ—Ç –ø–æ–∏—Å–∫–∞/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ Mini App
4. –ö–ª–∏–∫ –ø–æ —Ç–æ–≤–∞—Ä—É —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ –±–æ—Ç
5. –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ Mini App
6. Production —Ç—Ä–µ–±—É–µ—Ç HTTPS (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è production)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ limit –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (max 100)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è API
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- FastAPI –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- Vue.js lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- Nginx gzip compression
- Docker resource limits –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (OFFSET/LIMIT)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
- [MINIAPP_QUICKSTART.md](MINIAPP_QUICKSTART.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [MINIAPP_GUIDE.md](MINIAPP_GUIDE.md) - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [webapp/README.md](webapp/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
